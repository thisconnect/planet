#! /usr/bin/env node

var port = 8999,
	host = '127.0.0.1',
	http = require('http'),
	optparse = require('optparse').OptionParser;

var parser = new optparse([
	['-p', '--port PORT', 'The port to bind to (default: 8999)'],
	['', '--host HOST', 'The host to connect to (default: 127.0.0.1)'],
	['-h', '--help', 'Shows this help message']
]);

parser.banner = 'Usage: planet [--port PORT] [--host HOST]';

parser.on('*', function(opt, value){
	switch (opt){
		case 'port': port = value || port; break;
		case 'host': host = value || host; break;
		case 'help':
			console.log(this.toString());
			parser.halt();
			process.exit(0);
		break;
	}
});

parser.parse(process.argv);

var server = http.createServer(),
	Planet = require('./../lib/planet/planet').Planet;

new Planet(server).listen(port, host);
